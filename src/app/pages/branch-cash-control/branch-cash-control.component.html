<div class="header bg-gradient-danger pb-6 pt-5 pt-md-8">
</div>
<!-- Page content -->
<div class="container-fluid mt--7">
  <!-- Table -->
  <div class="row" *ngFor="let item of branchCashControlLst">
    <div class="col pb-2">
      <div class="card shadow">
        <div class="card-header border-0">
          <div class="row ">
            <div class="col">
              <li style="list-style-type: none;">
                <a href="javascript:void(0)" *ngIf="!collapsedBranchItemLst[item.branchId]" (click)="collapsedBranchItemLst[item.branchId]=true">
                  <i class="fas fa-angle-up"> </i>
                  <span style="font-family:Open Sans, sans-serif;"> {{item.name}}</span>
                </a>
                <a href="javascript:void(0)" *ngIf="collapsedBranchItemLst[item.branchId]" (click)="collapsedBranchItemLst[item.branchId]=false">
                  <i class="fas fa-angle-down"> </i>
                  <span style="font-family:Open Sans, sans-serif;"> {{item.name}}</span>
                </a>
              </li>
            </div>
          </div>
        </div>

        <div class="table-responsive" *ngIf="!collapsedBranchItemLst[item.branchId]">
          <table class="table align-items-center table-flush">
            <thead class="thead-light">
              <tr>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col" class="text-right">Reportado en sucursal</th>
                <th scope="col" class="text-right">Calculado en sistema</th>
                <th scope="col"></th>
                <th scope="col" class="text-center">Informaci√≥n Adicional</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <span class="text-success">
                    <i class="fas fa-circle"></i>
                  </span>
                </td>
                <td>
                  <span class="mb-0 text-sm">Entrada</span>
                </td>
                <td class="text-right">
                  <span class="mb-0 text-sm">{{item.entry}}</span>
                </td>
                <td class="text-right">
                  <span class="mb-0 text-sm">{{item.calcEntry}}</span>
                </td>
                <td class="text-right">
                  <a href="javascript:void(0)" (click)="getEntryDetails(item.branchId,item.name,item.dateOfCapture)">Ver detalle</a>
                </td>
                <td rowspan="3"  class="text-center">
                  <span>{{item.adicionalInfo}}</span>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="text-yellow">
                    <i class="fas fa-circle"></i>
                  </span>
                </td>
                <td>
                  <span class="mb-0 text-sm">Venta</span>
                </td>
                <td  class="text-right">
                  <span class="mb-0 text-sm">{{item.selled}}</span>
                </td>
                <td  class="text-right">
                  <span class="mb-0 text-sm">{{item.previousResidue + item.calcEntry - item.residue}}</span>
                </td>
                <td class="text-right">
                  <a href="javascript:void(0)">Ver detalle</a>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="text-danger">
                    <i class="fas fa-circle"></i>
                  </span>
                </td>
                <td>
                  <span class="mb-0 text-sm">Saldo</span>
                </td>
                <td class="text-right">
                  <span class="mb-0 text-sm">{{item.residue}}</span>
                </td>
                <td class="text-right">
                  <span class="mb-0 text-sm">{{item.previousResidue + item.calcEntry - item.selled}}</span>
                </td>
                <td class="text-right">
                  <a href="javascript:void(0)">Ver detalle</a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="entrysModal">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Enviado a sucursal {{branchName}} el {{dateOfCapture | date: 'EEEE, MMMM d, y'}}</h5>
          <button type="button" class="close" (click)="closeModal('entrysModal')" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <span *ngIf="productSentLst.length==0" >No hay registros para mostrar</span>

          <div class="table-responsive" *ngIf="productSentLst.length!=0" >
            <table class="table align-items-center table-flush">
              <thead class="thead-light">
                <tr>
                  <th scope="col">PRODUCTO</th>
                  <th scope="col">KILOS</th>
                  <th scope="col">PIEZAS</th>
                  <th scope="col">CAJAS</th>
                  <th scope="col">MONTO</th>
                </tr>
              </thead>
              <tfoot>
                <tr class="bg-gray">
                  <td colspan="4" class="text-white"><b>Total</b></td>
                  <td class="text-white"><b>{{getTotal() | currency}}</b></td>
                </tr>
              </tfoot>
              <tbody>
                <tr *ngFor="let item of productSentLst">
                  <td>
                    <span class="mb-0 text-sm">{{item.description}}</span>
                  </td>
                  <td>
                    {{item.kilograms}}
                  </td>
                  <td>
                    {{item.pieces}}
                  </td>
                  <td>
                    {{item.boxes}}
                  </td>
                  <td>
                    {{item.amount | currency}}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary"  (click)="closeModal('entrysModal')" data-dismiss="modal">Cerrar</button>
          <button type="button" class="btn btn-primary" *ngIf="productSentLst.length!=0">Guardar cambios</button>
        </div>
      </div>
    </div>
  </div>
</div>


